---
title: Console
description: Terminal console component for server interaction
---

# Console

The Console component provides a terminal-like interface for viewing server output and sending commands.

## Import

```tsx
import { Console } from '@workspace/ui/components/shared/Console/Console';
```

## Usage

```tsx
<Console
  logs={[
    { timestamp: Date.now(), message: '[Server] Starting...' },
    { timestamp: Date.now(), message: '[Server] Loading world...' },
    { timestamp: Date.now(), message: '[Server] Done!' },
  ]}
  onCommand={(cmd) => sendCommand(cmd)}
/>
```

## Features

- Real-time log streaming
- Command input with history
- Timestamp tooltips
- Auto-scroll with manual override
- Copy log entries
- Search/filter logs
- Syntax highlighting

## Props

| Prop | Type | Description |
|------|------|-------------|
| `logs` | `LogEntry[]` | Array of log entries |
| `onCommand` | `(cmd: string) => void` | Command handler |
| `readOnly` | `boolean` | Disable command input |
| `maxLines` | `number` | Maximum lines to display |
| `autoScroll` | `boolean` | Auto-scroll to bottom |
| `showTimestamps` | `boolean` | Show timestamps |

## Log Entry Type

```typescript
interface LogEntry {
  timestamp: number;
  message: string;
  level?: 'info' | 'warn' | 'error';
  source?: string;
}
```

## Components

### Console

Main console component with log display and input.

### ScrollContext

Manages scroll state and auto-scroll behavior.

```tsx
import { ScrollProvider, useScroll } from '@workspace/ui/components/shared/Console/ScrollContext';

<ScrollProvider>
  <Console logs={logs} />
</ScrollProvider>
```

### TimestampTooltip

Displays full timestamp on hover.

```tsx
<TimestampTooltip timestamp={Date.now()}>
  <span>12:34:56</span>
</TimestampTooltip>
```

## Styling

The console uses monospace font and dark theme:

```css
.console {
  font-family: 'JetBrains Mono', monospace;
  background: #0a0a0a;
  color: #e5e5e5;
}

.log-info { color: #60a5fa; }
.log-warn { color: #fbbf24; }
.log-error { color: #f87171; }
```

## Keyboard Shortcuts

| Key | Action |
|-----|--------|
| `Enter` | Send command |
| `↑` | Previous command |
| `↓` | Next command |
| `Ctrl+C` | Copy selection |
| `Ctrl+L` | Clear console |
| `Escape` | Cancel input |

## WebSocket Integration

Connect to the daemon WebSocket for real-time logs:

```tsx
function ServerConsole({ serverId }) {
  const [logs, setLogs] = useState([]);
  const wsRef = useRef(null);

  useEffect(() => {
    const ws = new WebSocket(`wss://node.example.com/console/${serverId}`);

    ws.onmessage = (event) => {
      const data = JSON.parse(event.data);
      if (data.type === 'output') {
        setLogs(prev => [...prev, {
          timestamp: data.timestamp,
          message: data.data,
        }]);
      }
    };

    wsRef.current = ws;
    return () => ws.close();
  }, [serverId]);

  const sendCommand = (cmd) => {
    wsRef.current?.send(JSON.stringify({
      type: 'input',
      data: cmd,
    }));
  };

  return <Console logs={logs} onCommand={sendCommand} />;
}
```

## Performance

For high-volume logs:

- Use `maxLines` to limit displayed entries
- Implement virtual scrolling for large buffers
- Batch updates with `requestAnimationFrame`
- Use `React.memo` for log entries
